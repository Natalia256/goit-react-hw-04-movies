{"version":3,"sources":["pages/MovieDetailsPage/MovieDetailsPage.jsx","services/ApiService/ApiService.jsx"],"names":["apiService","ApiService","MovieDetailsPage","state","genres","overview","poster_path","title","vote_average","hanleGoBack","props","history","location","push","pathname","search","query","movieId","this","match","params","getMovieById","then","map","el","name","join","setState","id","onClick","className","type","role","aria-label","src","alt","to","fallback","routesDetails","label","path","exact","component","Component","AUTH_KEY","axios","defaults","baseURL","get","response","data","results","cast"],"mappings":"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","file":"static/js/movie-details.7b970d81.chunk.js","sourcesContent":["import { Component, Suspense } from \"react\";\r\nimport { NavLink, Route } from \"react-router-dom\";\r\nimport { routesDetails } from \"../../components/routes\";\r\nimport PropTypes from \"prop-types\";\r\nimport ApiService from \"../../services/ApiService/ApiService\";\r\nconst apiService = new ApiService();\r\n\r\nclass MovieDetailsPage extends Component {\r\n  state = {\r\n    genres: \"\",\r\n    overview: \"\",\r\n    poster_path: \"\",\r\n    title: \"\",\r\n    vote_average: \"\",\r\n  };\r\n  componentDidMount() {\r\n    const { movieId } = this.props.match.params;\r\n    apiService\r\n      .getMovieById(movieId)\r\n      .then(({ genres, overview, poster_path, title, vote_average }) => {\r\n        if (genres) {\r\n          genres = genres.map((el) => el.name).join(\", \");\r\n        }\r\n        if (poster_path) {\r\n          poster_path = `https://image.tmdb.org/t/p/w500/${poster_path}`;\r\n        }\r\n        this.setState({\r\n          genres,\r\n          overview,\r\n          poster_path,\r\n          title,\r\n          vote_average,\r\n        });\r\n      });\r\n  }\r\n  hanleGoBack = () => {\r\n    const { history, location } = this.props;\r\n\r\n    history.push({\r\n      pathname: location.state?.pathname || \"/\",\r\n      state: location.state,\r\n      search: location.state.query ? `query=${location.state.query}` : null,\r\n    });\r\n  };\r\n  render() {\r\n    const id = this.props.match.params.movieId;\r\n    const { genres, overview, poster_path, title, vote_average } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <button\r\n          onClick={this.hanleGoBack}\r\n          className=\"button backBtn\"\r\n          type=\"button\"\r\n        >\r\n          <span role=\"img\" aria-label=\"arrow-left-emoji\">\r\n            ‚Üê\r\n          </span>{\" \"}\r\n          Go back\r\n        </button>\r\n        <div className=\"movieDetails\">\r\n          <img className=\"moviePoster\" src={poster_path} alt=\"movie-poster\" />\r\n          <div className=\"description\">\r\n            <h2 className=\"mar\">{title}</h2>\r\n            <p className=\"mar\">User score: {vote_average * 10}%</p>\r\n            <h4 className=\"mar\">Overview</h4>\r\n            <p className=\"mar\">{overview}</p>\r\n            <h4 className=\"mar\">Genres</h4>\r\n            <p>{genres}</p>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h3 className=\"mar\">Additional information</h3>\r\n          <ul>\r\n            <li className=\"mar\">\r\n              <NavLink\r\n                to={{\r\n                  pathname: `/movies/${id}/cast`,\r\n                  state: {\r\n                    query: this.props.location.state.query,\r\n                    pathname: this.props.location.state.pathname,\r\n                  },\r\n                }}\r\n              >\r\n                Cast\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"mar\">\r\n              <NavLink\r\n                to={{\r\n                  pathname: `/movies/${id}/reviews`,\r\n                  state: {\r\n                    query: this.props.location.state.query,\r\n                    pathname: this.props.location.state.pathname,\r\n                  },\r\n                }}\r\n              >\r\n                Reviews\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <Suspense fallback={<p>Loading...</p>}>\r\n          {routesDetails.map(({ label, path, exact, component }) => (\r\n            <Route\r\n              key={label}\r\n              path={path}\r\n              exact={exact}\r\n              component={component}\r\n            />\r\n          ))}\r\n        </Suspense>\r\n      </>\r\n    );\r\n  }\r\n}\r\nMovieDetailsPage.propTypes = {\r\n  history: PropTypes.object,\r\n  location: PropTypes.object,\r\n  match: PropTypes.object,\r\n};\r\nexport default MovieDetailsPage;","import axios from \"axios\";\r\nconst AUTH_KEY = 'a3368b25f03d671fc46c253c64d35f5e';\r\naxios.defaults.baseURL = \"https://api.themoviedb.org/3\";\r\n\r\nexport default class ApiService {\r\n  getTradingMovies() {\r\n    return axios\r\n      .get(`/trending/all/week?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n\r\n  getMoviesOnSearch(query) {\r\n    return axios\r\n      .get(`/search/movie?api_key=${AUTH_KEY}&query=${query}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n  getMovieById(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data);\r\n  }\r\n  getMovieCredits(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}/credits?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.cast);\r\n  }\r\n  getMovieReviews(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}/reviews?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n}"],"sourceRoot":""}