{"version":3,"sources":["pages/MoviesPage/MoviesPage.jsx","services/ApiService/ApiService.jsx","img/no-img.jpg","components/MovieList/MovieList.jsx","../node_modules/query-string/index.js","../node_modules/strict-uri-encode/index.js"],"names":["apiService","ApiService","MoviesPage","qs","QueryString","parse","props","location","search","state","query","movies","isLoading","fetchMovies","setState","getMoviesOnSearch","then","data","catch","e","console","log","finally","history","push","handleSubmit","preventDefault","target","reset","handleInputChange","value","this","onSubmit","className","onChange","type","length","pathname","items","Component","AUTH_KEY","axios","defaults","baseURL","get","response","results","movieId","cast","MovieList","map","el","to","id","src","poster_path","img","alt","title","strictUriEncode","require","objectAssign","encode","opts","strict","encodeURIComponent","keysSorter","input","Array","isArray","sort","Object","keys","a","b","Number","key","exports","extract","str","split","formatter","result","arrayFormat","accumulator","exec","replace","undefined","concat","parserForArrayFormat","ret","create","trim","forEach","param","parts","shift","val","join","decodeURIComponent","reduce","Boolean","stringify","obj","index","encoderForArrayFormat","slice","val2","filter","x","module","c","charCodeAt","toString","toUpperCase"],"mappings":"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","file":"static/js/movies-page.4786c89b.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport QueryString from \"query-string\";\r\nimport MovieList from \"../../components/MovieList/MovieList\";\r\nimport ApiService from \"../../services/ApiService/ApiService\";\r\nconst apiService = new ApiService();\r\nclass MoviesPage extends Component {\r\n  qs = QueryString.parse(this.props.location.search);\r\n  state = {\r\n    query: this.qs.query || \"\",\r\n    movies: [],\r\n    isLoading: false,\r\n  };\r\n  componentDidMount() {\r\n    if (this.state.query) {\r\n      this.fetchMovies();\r\n    }\r\n  }\r\n\r\n  fetchMovies = () => {\r\n    this.setState({ isLoading: true });\r\n    apiService\r\n      .getMoviesOnSearch(this.state.query)\r\n      .then((data) => {\r\n        this.setState({\r\n          movies: data,\r\n        });\r\n      })\r\n      .catch((e) => console.log(e))\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n    if (this.state.query) {\r\n      this.props.history.push({\r\n        search: `query=${this.state.query}`,\r\n      });\r\n    }\r\n  };\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.fetchMovies();\r\n    e.target.reset();\r\n  };\r\n  handleInputChange = (e) => {\r\n    this.setState({\r\n      query: e.target.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <form onSubmit={this.handleSubmit} className=\"searchForm\">\r\n          <input onChange={this.handleInputChange} className=\"input\" />\r\n          <button type=\"submit\" className=\"button searchBtn\">\r\n            Search\r\n          </button>\r\n        </form>\r\n        {this.state.isLoading && <p>Loading...</p>}\r\n        {this.state.movies.length > 0 && (\r\n          <MovieList\r\n            pathname={this.props.location.pathname}\r\n            query={this.state.query}\r\n            items={this.state.movies}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\nMoviesPage.propTypes = {\r\n  history: PropTypes.object,\r\n  location: PropTypes.object,\r\n  match: PropTypes.object,\r\n};\r\nexport default MoviesPage;","import axios from \"axios\";\r\nconst AUTH_KEY = 'a3368b25f03d671fc46c253c64d35f5e';\r\naxios.defaults.baseURL = \"https://api.themoviedb.org/3\";\r\n\r\nexport default class ApiService {\r\n  getTradingMovies() {\r\n    return axios\r\n      .get(`/trending/all/week?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n\r\n  getMoviesOnSearch(query) {\r\n    return axios\r\n      .get(`/search/movie?api_key=${AUTH_KEY}&query=${query}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n  getMovieById(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data);\r\n  }\r\n  getMovieCredits(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}/credits?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.cast);\r\n  }\r\n  getMovieReviews(movieId) {\r\n    return axios\r\n      .get(`/movie/${movieId}/reviews?api_key=${AUTH_KEY}`)\r\n      .then((response) => response.data.results);\r\n  }\r\n}","export default __webpack_public_path__ + \"static/media/no-img.86c1af37.jpg\";","import { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport img from \"../../img/no-img.jpg\";\r\n\r\nconst MovieList = ({ items, query, pathname }) => {\r\n  return (\r\n    <ul className=\"previewList\">\r\n      {items.map((el) => {\r\n        return (\r\n          <li className=\"previewItem\" key={el.id}>\r\n            <Link\r\n              className=\"previewLink\"\r\n              to={{\r\n                pathname: `/movies/${el.id}`,\r\n                state: {\r\n                  query,\r\n                  pathname,\r\n                },\r\n              }}\r\n            >\r\n              <div className=\"wrapper\">\r\n                <img\r\n                  className=\"previewImg\"\r\n                  src={\r\n                    el.poster_path\r\n                      ? `https://image.tmdb.org/t/p/w500/${el.poster_path}`\r\n                      : img\r\n                  }\r\n                  alt=\"\"\r\n                />\r\n                <h3>{el.title}</h3>\r\n              </div>\r\n            </Link>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nMovieList.propTypes = {\r\n  items: PropTypes.array,\r\n  query: PropTypes.string,\r\n  pathname: PropTypes.string,\r\n};\r\nexport default MovieList;","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\tformatter(decodeURIComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n"],"sourceRoot":""}